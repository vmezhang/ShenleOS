/*
 * =====================================================================================
 *
 *       Filename:  idt.c
 *
 *    Description:  中断描述符与中断相关的函数定义
 *
 *        Version:  1.0
 *        Created:  2013年10月28日 17时55分38秒
 *       Revision:  none
 *       Compiler:  gcc
 *
 *         Author:  zhangrui, v.mezhang@gmail.com
 *        Company:  Class 1107 of Computer Science and Technology
 *
 * =====================================================================================
 */

#include "common.h"
#include "string.h"
#include "idt.h"

//中断描述符表
idt_entry_t idt_entries[256];

//IDTR
idt_ptr_t idt_ptr;

//中断处理函数的指针数组
interrupt_handler_t interrupt_handlers[256];

//设置中断描述符
interrupt_handler_t interrupt_handlers[256];

//设置中断描述符
static void idt_set_gate(uint8_t num, uint32_t base, uint16_t sel, uint8_t flags);

//声明加载IDTR的函数
extern void idt_flush(uint32_t);

//初始化中断描述符表
void init_idt()
{
	//重新映射IRQ表
	//两片级联的Interl 8259A芯片
	//主片端口 0x20 0x21
	//从片端口 0xA0 0xA1
	
	//初始化主片，从片
	//0001 0001
	
}
